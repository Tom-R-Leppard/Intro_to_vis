{
  "hash": "c94625ce55a8d1533ed2edc029605a53",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Cleaning and Annotating\"\nauthor: \"Tom Leppard\"\ndate: \"2025-06-11\"\noutput: html_document\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhybrid <- read.csv(file.choose())\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_costs <- hybrid %>%\n  group_by(class) %>%\n  summarise(cost = mean(msrp, na.rm = TRUE)) %>%\n  ungroup()\n```\n:::\n\n\n\n\n\n\n# Titles\n\nThere are three things you need to learn about titles. First, how to alter them using the labs() option. Second, how to change their presentation (size etc.). Third, the substantive utility of titles on graphs.\n\nBellow I demonstrate code using a moderated version of the hybrid cars dataset. I present two versions of the graph to demosntrate differences in substance. You may wish to have descriptive titles that describe what the chart shows. Or you may wish to have narrative-based titles that describe what the chart shows.\n\nDescriptive Title:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Average Price by Car Class\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12))\n```\n\n::: {.cell-output-display}\n![](Cleaning-and-Annotating_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\nNarrative Title:\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Luxury Hybrids are Most Expensive\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12))\n```\n\n::: {.cell-output-display}\n![](Cleaning-and-Annotating_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n# Axes\n\n## Swapping Axes\n\n## Changing order of Bar Chart Items\n\n# Annotations on Graphs\n\nThere are many different annotations you may wish to include in your graph. The aims of annotations are to highlight elements of the graph or to clarify something about the graph. Many of this comes from [Chapter 7](https://r-graphics.org/CHAPTER-ANNOTATE.html) of Chang's book.\n\nWhen creating a bar graph the code is slightly different. Since the x axis is categorical, the coordinates for your annotation need to reflect that. Instead of the number value of the annotation, you need to tell the ggplot which category you want the annotation over. Here, I place an arrow and some text onto the graph to demonstrate both the geom_text() and annotate() arguments.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Luxury Hybrids are Most Expensive\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12)) +\n  geom_text(x = \"TS\", y = 70000, aes(label = \"Cheapest\")) +\n  annotate(\"segment\", x = \"TS\", xend = \"TS\", y = 60000, yend = 20000, arrow = arrow(angle = 45, length = unit(.2,\"cm\"))) \n```\n\n::: {.cell-output-display}\n![](Cleaning-and-Annotating_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\nThere are some other ways that you can highlight elements of your plot. For example, you could shade a specific area of your plot or add other annotations to highlight aspects of your visualisation.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncosts_time <- hybrid %>%\n  group_by(year) %>%\n  summarise(avg_cost = mean(msrp, na.rm = TRUE)) %>%\n  ungroup()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(costs_time, aes(x = year, y = avg_cost)) +\n  geom_line() +\n  annotate(\"rect\", xmin = 2005, xmax = 2007, ymin =27500, ymax = 47000, alpha = 0.1, fill = \"red\")\n```\n\n::: {.cell-output-display}\n![](Cleaning-and-Annotating_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n# Colours\n\n## Colour Blind Palets\n\n# Publication Ready Graphs\n",
    "supporting": [
      "Cleaning-and-Annotating_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}