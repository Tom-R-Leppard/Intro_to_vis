{"title":"Cleaning and Annotating","markdown":{"yaml":{"title":"Cleaning and Annotating","author":"Tom Leppard","date":"`r Sys.Date()`","output":"html_document"},"headingText":"Titles","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)\n```\n\n```{r}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n```{r}\nhybrid <- read.csv(file.choose())\n```\n\n```{r}\nclass_costs <- hybrid %>%\n  group_by(class) %>%\n  summarise(cost = mean(msrp, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n\nThere are three things you need to learn about titles. First, how to alter them using the labs() option. Second, how to change their presentation (size etc.). Third, the substantive utility of titles on graphs.\n\nBellow I demonstrate code using a moderated version of the hybrid cars dataset. I present two versions of the graph to demosntrate differences in substance. You may wish to have descriptive titles that describe what the chart shows. Or you may wish to have narrative-based titles that describe what the chart shows.\n\nDescriptive Title:\n\n```{r}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Average Price by Car Class\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12))\n```\n\nNarrative Title:\n\n```{r}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Luxury Hybrids are Most Expensive\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12))\n```\n\n```{r}\n```\n\n# Axes\n\n## Swapping Axes\n\n## Changing order of Bar Chart Items\n\n# Annotations on Graphs\n\nThere are many different annotations you may wish to include in your graph. The aims of annotations are to highlight elements of the graph or to clarify something about the graph. Many of this comes from [Chapter 7](https://r-graphics.org/CHAPTER-ANNOTATE.html) of Chang's book.\n\nWhen creating a bar graph the code is slightly different. Since the x axis is categorical, the coordinates for your annotation need to reflect that. Instead of the number value of the annotation, you need to tell the ggplot which category you want the annotation over. Here, I place an arrow and some text onto the graph to demonstrate both the geom_text() and annotate() arguments.\n\n```{r}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Luxury Hybrids are Most Expensive\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12)) +\n  geom_text(x = \"TS\", y = 70000, aes(label = \"Cheapest\")) +\n  annotate(\"segment\", x = \"TS\", xend = \"TS\", y = 60000, yend = 20000, arrow = arrow(angle = 45, length = unit(.2,\"cm\"))) \n```\n\nThere are some other ways that you can highlight elements of your plot. For example, you could shade a specific area of your plot or add other annotations to highlight aspects of your visualisation.\n\n```{r}\ncosts_time <- hybrid %>%\n  group_by(year) %>%\n  summarise(avg_cost = mean(msrp, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n```{r}\nggplot(costs_time, aes(x = year, y = avg_cost)) +\n  geom_line() +\n  annotate(\"rect\", xmin = 2005, xmax = 2007, ymin =27500, ymax = 47000, alpha = 0.1, fill = \"red\")\n```\n\n# Colours\n\n## Colour Blind Palets\n\n# Publication Ready Graphs\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)\n```\n\n```{r}\nlibrary(ggplot2)\nlibrary(dplyr)\n```\n\n```{r}\nhybrid <- read.csv(file.choose())\n```\n\n```{r}\nclass_costs <- hybrid %>%\n  group_by(class) %>%\n  summarise(cost = mean(msrp, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n# Titles\n\nThere are three things you need to learn about titles. First, how to alter them using the labs() option. Second, how to change their presentation (size etc.). Third, the substantive utility of titles on graphs.\n\nBellow I demonstrate code using a moderated version of the hybrid cars dataset. I present two versions of the graph to demosntrate differences in substance. You may wish to have descriptive titles that describe what the chart shows. Or you may wish to have narrative-based titles that describe what the chart shows.\n\nDescriptive Title:\n\n```{r}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Average Price by Car Class\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12))\n```\n\nNarrative Title:\n\n```{r}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Luxury Hybrids are Most Expensive\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12))\n```\n\n```{r}\n```\n\n# Axes\n\n## Swapping Axes\n\n## Changing order of Bar Chart Items\n\n# Annotations on Graphs\n\nThere are many different annotations you may wish to include in your graph. The aims of annotations are to highlight elements of the graph or to clarify something about the graph. Many of this comes from [Chapter 7](https://r-graphics.org/CHAPTER-ANNOTATE.html) of Chang's book.\n\nWhen creating a bar graph the code is slightly different. Since the x axis is categorical, the coordinates for your annotation need to reflect that. Instead of the number value of the annotation, you need to tell the ggplot which category you want the annotation over. Here, I place an arrow and some text onto the graph to demonstrate both the geom_text() and annotate() arguments.\n\n```{r}\nggplot(class_costs, aes(x = class, y = cost)) +\n  geom_bar(stat = \"identity\", fill = \"steelblue\") +\n  labs(title = \"Luxury Hybrids are Most Expensive\", x = \"Car Class\", y = \"Average Cost\") +\n  theme_minimal() +\n  theme(plot.title = element_text(size = 18, face = \"bold\"),\n    axis.title.x = element_text(size = 14),\n    axis.title.y = element_text(size = 14),\n    axis.text = element_text(size = 12)) +\n  geom_text(x = \"TS\", y = 70000, aes(label = \"Cheapest\")) +\n  annotate(\"segment\", x = \"TS\", xend = \"TS\", y = 60000, yend = 20000, arrow = arrow(angle = 45, length = unit(.2,\"cm\"))) \n```\n\nThere are some other ways that you can highlight elements of your plot. For example, you could shade a specific area of your plot or add other annotations to highlight aspects of your visualisation.\n\n```{r}\ncosts_time <- hybrid %>%\n  group_by(year) %>%\n  summarise(avg_cost = mean(msrp, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n```{r}\nggplot(costs_time, aes(x = year, y = avg_cost)) +\n  geom_line() +\n  annotate(\"rect\", xmin = 2005, xmax = 2007, ymin =27500, ymax = 47000, alpha = 0.1, fill = \"red\")\n```\n\n# Colours\n\n## Colour Blind Palets\n\n# Publication Ready Graphs\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":"html_document","warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"Cleaning and Annotating.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","bibliography":["references.bib"],"editor":"visual","theme":["simplex","brand"],"navbar":{"logo":"cover.png","title":"DSA 202","search":true},"title":"Cleaning and Annotating","author":"Tom Leppard","date":"`r Sys.Date()`"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":"html_document","warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"Cleaning and Annotating.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"editor":"visual","documentclass":"scrreprt","title":"Cleaning and Annotating","author":"Tom Leppard","date":"`r Sys.Date()`"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}