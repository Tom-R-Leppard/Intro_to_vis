{"title":"Categorical Data","markdown":{"yaml":{"title":"Categorical Data","format":"html"},"headingText":"Basic Bar Chart","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)\n```\n\n```{r}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(gcookbook)\n```\n\n```{r}\nhybrid <- read.csv(file.choose())\n```\n\n\n```{r}\nggplot(hybrid, aes(x = class)) +\n  geom_bar()\n```\n\nHowever, this basically serves as a histogram, counting the number of cars in each class type. We may want to so something a little bit more than that. For example, we might want to show the average price of each class of car. to do this, we nee to transform our data a bit. We have mrsp for each car. So, to get the average cost of each class of car, we need to group the data by the class and then get the average cost by that class. Follow the logic of the next chunks of code and look at what the plot tells you.\n\n```{r}\nclass_costs <- hybrid %>%\n  group_by(class) %>%\n  summarise(cost = mean(msrp, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n```{r}\nggplot(class_costs, aes(x = class, y = cost)) +\n   geom_col(fill = \"steelblue\", color = \"black\") +\n  theme_minimal()\n```\n\n## Intermediate Bar Graphs\n\nHere, we are going to further transform th data to demonstrate some more uses of bar charts. You want to present a bar chart sowing the number of cars in each class by their fuel efficiency.\n\nFirst, we need to create a categorical variable indicating a a ranking of how fuel efficient the car is. Here, I create three tiers, low (less than 20), medium (20-30) and high (above 30).\n\n```{r}\nhybrid <- hybrid %>%\n  mutate(mpg_tier = case_when(\n    mpg < 20 ~ \"Low (<20)\",\n    mpg >= 20 & mpg <= 30 ~ \"Medium (20–30)\",\n    mpg > 30 ~ \"High (>30)\"\n  ))\n```\n\nYou may want to show the contribution that individual groups make to the total, in this instance, you can use a stacked bar chart. In this case, the stacked bar\n\n```{r}\nggplot(hybrid, aes(x = class, fill = mpg_tier)) +\n  geom_bar() \n```\n\nWhat types of things do you see here?\n\nThis visualiation can be cleaned a little further by adding boundaries around each group. You can also flip the axes to increase readability.\n\n```{r}\nggplot(hybrid, aes(x = class, fill = mpg_tier)) +\n  geom_bar(color = \"black\") + \n  coord_flip()\n```\n\nFinally, one slight alteration of stacked bar graphs is to scale the y axis to a percentage where 1 = 100% of the total observed at each level of the X axis (note that this total might be different in terms of raw count). This way, each stack of the bar graph represents the proportion of that whole. This is ONLY appropriate if you don't need to show the count, but care more about the proportion of the total. I.e. the growth in the presence of one category compared to another. This could be missleading since the stacked bars appear to be the same \"height\" at each category of the X axis. Meanwhile, we know from the above bar graphs that the total (in terms of a count) changes at each category of the X axis.\n\nThese are best interpreted when the focus is on relative composition within categories, rather than absolute differences in size. They are particularly useful when comparing how the distribution of subgroups (e.g., MPG tiers) changes across another variable (e.g., car class), while disregarding the total count in each category. However, care should be taken in interpretation: because all bars are scaled to the same height, it can obscure the fact that some groups are much larger than others in absolute terms. If readers misinterpret the chart as representing both proportion and quantity, it can lead to false conclusions.\n\n```{r}\nggplot(hybrid, aes(x = class, fill = mpg_tier)) +\n  geom_bar(position = \"fill\", colour = \"black\") +\n  coord_flip()\n```\n\nStacked bar charts are a good tool to have in your toolkit. However, they aren't always the most intuitive to interpret. Especially if you have more categories than two. In this case, you have three categories. So, if your stacked bar chart is not easy to read, you might decide to place the bars next to each other. This will present three mpg tiers for each class of car.\n\n```{r}\nggplot(hybrid, aes(x = class, fill = mpg_tier)) +\n  geom_bar(position = \"dodge\", colour = \"black\")\n```\n\n## Pie and Donut Charts\n\nYou might be tempted to mock up a quick pie chart when you have categorical data. You can do this in ggplot2. However, don't. Pie charts are criticised because humans cannot differentiate angles very well. Each segment relies on differentiating from others by their size. If you must make a pie chart, then add the numbers so people can trick themselves that they always knew the segment with 11 is bigger than the segment with 9!\n\n```{r}\nclass_counts <- hybrid %>%\n  count(class)\n\nggplot(class_counts, aes(x = \"\", y = n, fill = class)) +\n  geom_col(color = \"black\") +\n  geom_text(aes(label = n), position = position_stack(vjust = 0.5)) +\n  coord_polar(theta = \"y\") +\n  theme_void()\n```\n\nBar charts are always prefferable. However, if you like the circular vibe consider a donut chart. This is a sort of pie char/bar chart hybrid. Still, not the clearest. To do this, you need to create a variable that demonstrates the hole side (the bigger the number, the larger the hole).\n\n```{r}\n\nhole <- 5\nclass_counts <- class_counts %>% \n  mutate(x = hole)\n\nggplot(class_counts, aes(x = hole, y = n, fill = class)) +\n  geom_col(color = \"black\") +\n  coord_polar(theta = \"y\") +\n   geom_text(aes(label = n),\n            position = position_stack(vjust = 0.5)) +\n  xlim(c(0.2, hole + 0.5)) + \n  theme_void()\n```\n\n## Activities\n\nFrom Winston Chang's [R Graphics Cookbook](https://r-graphics.org/):\n\n-   3.5 - Negative and Positive Values\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)\n```\n\n```{r}\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(gcookbook)\n```\n\n```{r}\nhybrid <- read.csv(file.choose())\n```\n\n## Basic Bar Chart\n\n```{r}\nggplot(hybrid, aes(x = class)) +\n  geom_bar()\n```\n\nHowever, this basically serves as a histogram, counting the number of cars in each class type. We may want to so something a little bit more than that. For example, we might want to show the average price of each class of car. to do this, we nee to transform our data a bit. We have mrsp for each car. So, to get the average cost of each class of car, we need to group the data by the class and then get the average cost by that class. Follow the logic of the next chunks of code and look at what the plot tells you.\n\n```{r}\nclass_costs <- hybrid %>%\n  group_by(class) %>%\n  summarise(cost = mean(msrp, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n```{r}\nggplot(class_costs, aes(x = class, y = cost)) +\n   geom_col(fill = \"steelblue\", color = \"black\") +\n  theme_minimal()\n```\n\n## Intermediate Bar Graphs\n\nHere, we are going to further transform th data to demonstrate some more uses of bar charts. You want to present a bar chart sowing the number of cars in each class by their fuel efficiency.\n\nFirst, we need to create a categorical variable indicating a a ranking of how fuel efficient the car is. Here, I create three tiers, low (less than 20), medium (20-30) and high (above 30).\n\n```{r}\nhybrid <- hybrid %>%\n  mutate(mpg_tier = case_when(\n    mpg < 20 ~ \"Low (<20)\",\n    mpg >= 20 & mpg <= 30 ~ \"Medium (20–30)\",\n    mpg > 30 ~ \"High (>30)\"\n  ))\n```\n\nYou may want to show the contribution that individual groups make to the total, in this instance, you can use a stacked bar chart. In this case, the stacked bar\n\n```{r}\nggplot(hybrid, aes(x = class, fill = mpg_tier)) +\n  geom_bar() \n```\n\nWhat types of things do you see here?\n\nThis visualiation can be cleaned a little further by adding boundaries around each group. You can also flip the axes to increase readability.\n\n```{r}\nggplot(hybrid, aes(x = class, fill = mpg_tier)) +\n  geom_bar(color = \"black\") + \n  coord_flip()\n```\n\nFinally, one slight alteration of stacked bar graphs is to scale the y axis to a percentage where 1 = 100% of the total observed at each level of the X axis (note that this total might be different in terms of raw count). This way, each stack of the bar graph represents the proportion of that whole. This is ONLY appropriate if you don't need to show the count, but care more about the proportion of the total. I.e. the growth in the presence of one category compared to another. This could be missleading since the stacked bars appear to be the same \"height\" at each category of the X axis. Meanwhile, we know from the above bar graphs that the total (in terms of a count) changes at each category of the X axis.\n\nThese are best interpreted when the focus is on relative composition within categories, rather than absolute differences in size. They are particularly useful when comparing how the distribution of subgroups (e.g., MPG tiers) changes across another variable (e.g., car class), while disregarding the total count in each category. However, care should be taken in interpretation: because all bars are scaled to the same height, it can obscure the fact that some groups are much larger than others in absolute terms. If readers misinterpret the chart as representing both proportion and quantity, it can lead to false conclusions.\n\n```{r}\nggplot(hybrid, aes(x = class, fill = mpg_tier)) +\n  geom_bar(position = \"fill\", colour = \"black\") +\n  coord_flip()\n```\n\nStacked bar charts are a good tool to have in your toolkit. However, they aren't always the most intuitive to interpret. Especially if you have more categories than two. In this case, you have three categories. So, if your stacked bar chart is not easy to read, you might decide to place the bars next to each other. This will present three mpg tiers for each class of car.\n\n```{r}\nggplot(hybrid, aes(x = class, fill = mpg_tier)) +\n  geom_bar(position = \"dodge\", colour = \"black\")\n```\n\n## Pie and Donut Charts\n\nYou might be tempted to mock up a quick pie chart when you have categorical data. You can do this in ggplot2. However, don't. Pie charts are criticised because humans cannot differentiate angles very well. Each segment relies on differentiating from others by their size. If you must make a pie chart, then add the numbers so people can trick themselves that they always knew the segment with 11 is bigger than the segment with 9!\n\n```{r}\nclass_counts <- hybrid %>%\n  count(class)\n\nggplot(class_counts, aes(x = \"\", y = n, fill = class)) +\n  geom_col(color = \"black\") +\n  geom_text(aes(label = n), position = position_stack(vjust = 0.5)) +\n  coord_polar(theta = \"y\") +\n  theme_void()\n```\n\nBar charts are always prefferable. However, if you like the circular vibe consider a donut chart. This is a sort of pie char/bar chart hybrid. Still, not the clearest. To do this, you need to create a variable that demonstrates the hole side (the bigger the number, the larger the hole).\n\n```{r}\n\nhole <- 5\nclass_counts <- class_counts %>% \n  mutate(x = hole)\n\nggplot(class_counts, aes(x = hole, y = n, fill = class)) +\n  geom_col(color = \"black\") +\n  coord_polar(theta = \"y\") +\n   geom_text(aes(label = n),\n            position = position_stack(vjust = 0.5)) +\n  xlim(c(0.2, hole + 0.5)) + \n  theme_void()\n```\n\n## Activities\n\nFrom Winston Chang's [R Graphics Cookbook](https://r-graphics.org/):\n\n-   3.5 - Negative and Positive Values\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"Categorical Data.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","bibliography":["references.bib"],"editor":"visual","theme":["simplex","brand"],"title":"Categorical Data"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":5.5,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","output-file":"Categorical Data.pdf"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"editor":"visual","documentclass":"scrreprt","title":"Categorical Data"},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","pdf"]}